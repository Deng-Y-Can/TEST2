<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Candy全能二维码与条形码生成器</title>
    <!-- 引入外部资源 - 使用多个CDN源确保可靠性 -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">

    <!-- 二维码生成库 - 提供多个备用CDN -->
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.1/build/qrcode.min.js"></script>
    <script>window.QRCode || document.write('<script src="https://unpkg.com/qrcode@1.5.1/build/qrcode.min.js"><\/script>')</script>

    <!-- 条形码生成库 - 提供多个备用CDN -->
    <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.6/dist/JsBarcode.all.min.js"></script>
    <script>window.JsBarcode || document.write('<script src="https://unpkg.com/jsbarcode@3.11.6/dist/JsBarcode.all.min.js"><\/script>')</script>

    <!-- Tailwind 配置 -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3B82F6',
                        secondary: '#10B981',
                        accent: '#8B5CF6',
                        dark: '#1E293B',
                        light: '#F8FAFC'
                    },
                    fontFamily: {
                        inter: ['Inter', 'system-ui', 'sans-serif'],
                    },
                }
            }
        }
    </script>

    <!-- 自定义工具类 -->
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }

            .transition-height {
                transition: max-height 0.3s ease-in-out;
            }

            .scrollbar-hide::-webkit-scrollbar {
                display: none;
            }

            .gradient-bg {
                background: linear-gradient(135deg, #3B82F6 0%, #8B5CF6 100%);
            }

            .card-shadow {
                box-shadow: 0 10px 25px -5px rgba(59, 130, 246, 0.1), 0 8px 10px -6px rgba(59, 130, 246, 0.1);
            }

            .progress-animation {
                animation: progress 1.5s infinite;
            }

            @keyframes progress {
                0% {
                    width: 0%;
                }

                50% {
                    width: 50%;
                }

                100% {
                    width: 100%;
                }
            }
        }
    </style>
</head>
<body class="font-inter bg-gray-50 text-dark min-h-screen flex flex-col">
    <!-- 导航栏 -->
    <header class="bg-white shadow-md fixed w-full top-0 z-50 transition-all duration-300" id="navbar">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="flex items-center space-x-2">
                <i class="fa fa-qrcode text-primary text-2xl"></i>
                <h1 class="text-xl font-bold bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent">全能码生成器</h1>
            </div>

            <nav class="hidden md:flex items-center space-x-6">
                <a href="#features" class="text-gray-600 hover:text-primary transition-colors">功能</a>
                <a href="#generator" class="text-gray-600 hover:text-primary transition-colors">生成器</a>
            </nav>

            <div class="flex items-center">
                <button class="md:hidden text-gray-600" id="menuToggle">
                    <i class="fa fa-bars text-xl"></i>
                </button>
            </div>
        </div>

        <!-- 移动端菜单 -->
        <div class="md:hidden hidden bg-white w-full absolute top-full left-0 shadow-lg" id="mobileMenu">
            <div class="container mx-auto px-4 py-3 flex flex-col space-y-3">
                <a href="#features" class="text-gray-600 hover:text-primary py-2 transition-colors">功能</a>
                <a href="#generator" class="text-gray-600 hover:text-primary py-2 transition-colors">生成器</a>
            </div>
        </div>
    </header>

    <!-- 主内容 -->
    <main class="flex-grow pt-20">
        <!-- 英雄区域 -->
        <section class="gradient-bg text-white py-16 md:py-24">
            <div class="container mx-auto px-4">
                <div class="max-w-3xl mx-auto text-center">
                    <h1 class="text-4xl md:text-5xl lg:text-6xl font-bold mb-6 leading-tight">
                        Candy二维码与条形码生成工具
                    </h1>
                    <p class="text-xl md:text-2xl opacity-90 mb-8">
                        支持多种码类型、自定义美化、文件嵌入与高级功能
                    </p>
                    <div class="flex justify-center">
                        <a href="#generator" class="px-8 py-3 bg-white text-primary font-semibold rounded-lg shadow-lg hover:shadow-xl transition-all transform hover:-translate-y-1">
                            开始生成 <i class="fa fa-arrow-right ml-2"></i>
                        </a>
                    </div>
                </div>
            </div>
        </section>

        <!-- 功能概览 -->
        <section id="features" class="py-16 bg-white">
            <div class="container mx-auto px-4">
                <div class="text-center mb-16">
                    <h2 class="text-3xl md:text-4xl font-bold mb-4">强大功能，简单操作</h2>
                    <p class="text-gray-600 max-w-2xl mx-auto text-lg">
                        提供全方位的码生成与管理功能
                    </p>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <!-- 功能卡片 1 -->
                    <div class="bg-gray-50 rounded-xl p-6 card-shadow hover:shadow-lg transition-all transform hover:-translate-y-1">
                        <div class="w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mb-4">
                            <i class="fa fa-cubes text-primary text-xl"></i>
                        </div>
                        <h3 class="text-xl font-bold mb-3">多种码类型</h3>
                        <p class="text-gray-600">
                            支持文本码、网址码、文件码、图片码、音视频码、名片码等多种类型，满足不同场景需求。
                        </p>
                    </div>

                    <!-- 功能卡片 2 -->
                    <div class="bg-gray-50 rounded-xl p-6 card-shadow hover:shadow-lg transition-all transform hover:-translate-y-1">
                        <div class="w-12 h-12 bg-secondary/10 rounded-lg flex items-center justify-center mb-4">
                            <i class="fa fa-paint-brush text-secondary text-xl"></i>
                        </div>
                        <h3 class="text-xl font-bold mb-3">自定义美化</h3>
                        <p class="text-gray-600">
                            可添加Logo、修改颜色、设置背景、添加文字等，让您的二维码更具品牌特色。
                        </p>
                    </div>

                    <!-- 功能卡片 3 -->
                    <div class="bg-gray-50 rounded-xl p-6 card-shadow hover:shadow-lg transition-all transform hover:-translate-y-1">
                        <div class="w-12 h-12 bg-accent/10 rounded-lg flex items-center justify-center mb-4">
                            <i class="fa fa-file-text-o text-accent text-xl"></i>
                        </div>
                        <h3 class="text-xl font-bold mb-3">文件资料嵌入</h3>
                        <p class="text-gray-600">
                            在二维码页面添加图片、PDF、视频、音频等多种文件资料，内容丰富直观。
                        </p>
                    </div>

                    <!-- 功能卡片 4 -->
                    <div class="bg-gray-50 rounded-xl p-6 card-shadow hover:shadow-lg transition-all transform hover:-translate-y-1">
                        <div class="w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mb-4">
                            <i class="fa fa-link text-primary text-xl"></i>
                        </div>
                        <h3 class="text-xl font-bold mb-3">链接跳转</h3>
                        <p class="text-gray-600">
                            支持跳转到外部网站、小程序或公众号文章，实现多平台无缝连接。
                        </p>
                    </div>

                    <!-- 功能卡片 5 -->
                    <div class="bg-gray-50 rounded-xl p-6 card-shadow hover:shadow-lg transition-all transform hover:-translate-y-1">
                        <div class="w-12 h-12 bg-secondary/10 rounded-lg flex items-center justify-center mb-4">
                            <i class="fa fa-play-circle-o text-secondary text-xl"></i>
                        </div>
                        <h3 class="text-xl font-bold mb-3">多媒体展示</h3>
                        <p class="text-gray-600">
                            实现图文高清展示、添加视频或动态背景，提升用户体验和信息传达效果。
                        </p>
                    </div>

                    <!-- 功能卡片 6 -->
                    <div class="bg-gray-50 rounded-xl p-6 card-shadow hover:shadow-lg transition-all transform hover:-translate-y-1">
                        <div class="w-12 h-12 bg-accent/10 rounded-lg flex items-center justify-center mb-4">
                            <i class="fa fa-shield text-accent text-xl"></i>
                        </div>
                        <h3 class="text-xl font-bold mb-3">企业标识与水印</h3>
                        <p class="text-gray-600">
                            文件预览时可添加企业标识和水印，保护知识产权，增强品牌识别度。
                        </p>
                    </div>
                </div>
            </div>
        </section>

        <!-- 生成器部分 -->
        <section id="generator" class="py-16 bg-gray-50">
            <div class="container mx-auto px-4">
                <div class="text-center mb-12">
                    <h2 class="text-3xl md:text-4xl font-bold mb-4">二维码与条形码生成器</h2>
                    <p class="text-gray-600 max-w-2xl mx-auto">
                        选择码类型，输入内容，自定义样式，轻松生成您需要的二维码或条形码
                    </p>
                </div>

                <div class="max-w-6xl mx-auto bg-white rounded-2xl shadow-xl overflow-hidden">
                    <div class="grid grid-cols-1 lg:grid-cols-3">
                        <!-- 左侧：设置面板 -->
                        <div class="lg:col-span-1 border-r border-gray-100 bg-gray-50 p-6">
                            <!-- 码类型选择 -->
                            <div class="mb-8">
                                <h3 class="text-lg font-semibold mb-4 flex items-center">
                                    <i class="fa fa-cog text-primary mr-2"></i> 码类型选择
                                </h3>
                                <div class="grid grid-cols-2 gap-3">
                                    <button class="code-type-btn active py-2 px-4 border-2 border-primary bg-primary/5 rounded-lg text-center font-medium transition-all" data-type="qr">
                                        <i class="fa fa-qrcode block mb-1"></i> 二维码
                                    </button>
                                    <button class="code-type-btn py-2 px-4 border-2 border-gray-200 rounded-lg text-center font-medium transition-all hover:border-primary/50" data-type="bar">
                                        <i class="fa fa-barcode block mb-1"></i> 条形码
                                    </button>
                                </div>
                            </div>

                            <!-- 二维码子类型选择 -->
                            <div id="qrSubtypeContainer" class="mb-8">
                                <h3 class="text-lg font-semibold mb-4">二维码内容类型</h3>
                                <div class="space-y-2 max-h-40 overflow-y-auto scrollbar-hide pr-2">
                                    <button class="qr-subtype-btn active w-full text-left py-2 px-3 rounded-lg bg-primary/5 text-primary font-medium transition-all" data-subtype="text">
                                        <i class="fa fa-font mr-2"></i> 文本
                                    </button>
                                    <button class="qr-subtype-btn w-full text-left py-2 px-3 rounded-lg hover:bg-gray-100 transition-all" data-subtype="url">
                                        <i class="fa fa-link mr-2"></i> 网址
                                    </button>
                                    <button class="qr-subtype-btn w-full text-left py-2 px-3 rounded-lg hover:bg-gray-100 transition-all" data-subtype="file">
                                        <i class="fa fa-file mr-2"></i> 文件
                                    </button>
                                    <button class="qr-subtype-btn w-full text-left py-2 px-3 rounded-lg hover:bg-gray-100 transition-all" data-subtype="image">
                                        <i class="fa fa-image mr-2"></i> 图片
                                    </button>
                                    <button class="qr-subtype-btn w-full text-left py-2 px-3 rounded-lg hover:bg-gray-100 transition-all" data-subtype="audio">
                                        <i class="fa fa-music mr-2"></i> 音频
                                    </button>
                                    <button class="qr-subtype-btn w-full text-left py-2 px-3 rounded-lg hover:bg-gray-100 transition-all" data-subtype="video">
                                        <i class="fa fa-video-camera mr-2"></i> 视频
                                    </button>
                                    <button class="qr-subtype-btn w-full text-left py-2 px-3 rounded-lg hover:bg-gray-100 transition-all" data-subtype="contact">
                                        <i class="fa fa-user mr-2"></i> 名片
                                    </button>
                                </div>
                            </div>

                            <!-- 内容输入 -->
                            <div id="contentInputContainer" class="mb-8">
                                <h3 class="text-lg font-semibold mb-4 flex items-center">
                                    <i class="fa fa-pencil text-primary mr-2"></i> 内容输入
                                </h3>

                                <!-- 文本输入 -->
                                <div id="textInput" class="content-input active">
                                    <textarea id="textContent" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-all h-32" placeholder="请输入要生成二维码的文本内容..."></textarea>
                                </div>

                                <!-- 网址输入 -->
                                <div id="urlInput" class="content-input hidden">
                                    <input type="url" id="urlContent" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-all" placeholder="请输入网址，例如：https://example.com">
                                </div>

                                <!-- 文件输入 -->
                                <div id="fileInput" class="content-input hidden">
                                    <input type="file" id="fileContent" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-all">
                                    <p class="text-sm text-gray-500 mt-2">支持PDF、Word等文件格式，最大50MB</p>
                                </div>

                                <!-- 图片输入 -->
                                <div id="imageInput" class="content-input hidden">
                                    <input type="file" id="imageContent" accept="image/*" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-all">
                                    <div class="mt-3 flex justify-center">
                                        <img id="previewImage" src="" alt="预览图片" class="max-w-full max-h-32 rounded-lg hidden">
                                    </div>
                                </div>

                                <!-- 音频输入 -->
                                <div id="audioInput" class="content-input hidden">
                                    <input type="file" id="audioContent" accept="audio/*" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-all">
                                    <div id="audioPreview" class="mt-3 hidden">
                                        <audio controls class="w-full">您的浏览器不支持音频播放</audio>
                                    </div>
                                </div>

                                <!-- 视频输入 -->
                                <div id="videoInput" class="content-input hidden">
                                    <input type="file" id="videoContent" accept="video/*" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-all">
                                    <div class="mt-3">
                                        <video id="videoPreview" controls class="w-full max-h-40 rounded-lg hidden">您的浏览器不支持视频播放</video>
                                    </div>
                                </div>

                                <!-- 名片输入 -->
                                <div id="contactInput" class="content-input hidden space-y-3">
                                    <input type="text" id="contactName" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-all" placeholder="姓名">
                                    <input type="text" id="contactCompany" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-all" placeholder="公司">
                                    <input type="text" id="contactTitle" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-all" placeholder="职位">
                                    <input type="tel" id="contactPhone" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-all" placeholder="电话">
                                    <input type="email" id="contactEmail" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-all" placeholder="邮箱">
                                    <input type="text" id="contactAddress" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-all" placeholder="地址">
                                </div>
                            </div>

                            <!-- 生成按钮 -->
                            <button id="generateBtn" class="w-full py-3 bg-primary text-white font-semibold rounded-lg hover:bg-primary/90 transition-all shadow-md hover:shadow-lg flex items-center justify-center">
                                <i class="fa fa-magic mr-2"></i> 生成二维码
                            </button>
                        </div>

                        <!-- 右侧：预览和自定义 -->
                        <div class="lg:col-span-2 p-6">
                            <!-- 进度条 -->
                            <div id="progressContainer" class="mb-6 hidden">
                                <div class="flex justify-between items-center mb-2">
                                    <span class="text-sm font-medium text-gray-700">正在生成...</span>
                                    <span id="progressPercent" class="text-sm font-medium text-primary">0%</span>
                                </div>
                                <div class="w-full bg-gray-200 rounded-full h-2.5">
                                    <div id="progressBar" class="bg-primary h-2.5 rounded-full progress-animation" style="width: 0%"></div>
                                </div>
                            </div>

                            <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                                <!-- 预览区域 -->
                                <div>
                                    <h3 class="text-lg font-semibold mb-4 flex items-center">
                                        <i class="fa fa-eye text-primary mr-2"></i> 预览
                                    </h3>
                                    <div class="bg-gray-100 rounded-xl p-8 flex items-center justify-center min-h-[300px]">
                                        <div id="codePreviewContainer" class="relative">
                                            <!-- 二维码/条形码将在这里生成 -->
                                            <canvas id="codeCanvas" class="max-w-full max-h-[250px]"></canvas>
                                            <div id="noPreviewMessage" class="text-center text-gray-500">
                                                <i class="fa fa-qrcode text-5xl mb-3 text-gray-300"></i>
                                                <p>请输入内容并点击生成按钮</p>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- 操作按钮 -->
                                    <div class="mt-4 flex space-x-3">
                                        <button id="downloadPNGBtn" class="flex-1 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-all flex items-center justify-center text-gray-700">
                                            <i class="fa fa-download mr-2"></i> PNG
                                        </button>
                                        <button id="downloadSVGBtn" class="flex-1 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-all flex items-center justify-center text-gray-700">
                                            <i class="fa fa-download mr-2"></i> SVG
                                        </button>
                                        <button id="printBtn" class="flex-1 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-all flex items-center justify-center text-gray-700">
                                            <i class="fa fa-print mr-2"></i> 打印
                                        </button>
                                    </div>
                                </div>

                                <!-- 自定义选项 -->
                                <div>
                                    <h3 class="text-lg font-semibold mb-4 flex items-center">
                                        <i class="fa fa-sliders text-primary mr-2"></i> 自定义样式
                                    </h3>

                                    <div class="space-y-6 max-h-[400px] overflow-y-auto pr-2">
                                        <!-- 尺寸设置 -->
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-1">尺寸</label>
                                            <input type="range" id="codeSize" min="100" max="500" value="300" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-primary">
                                            <div class="flex justify-between text-xs text-gray-500 mt-1">
                                                <span>小</span>
                                                <span>中</span>
                                                <span>大</span>
                                            </div>
                                        </div>

                                        <!-- 颜色设置 -->
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">颜色设置</label>
                                            <div class="grid grid-cols-2 gap-3">
                                                <div>
                                                    <label class="block text-xs text-gray-500 mb-1">前景色</label>
                                                    <input type="color" id="foregroundColor" value="#000000" class="w-full h-10 p-0 border border-gray-300 rounded-lg">
                                                </div>
                                                <div>
                                                    <label class="block text-xs text-gray-500 mb-1">背景色</label>
                                                    <input type="color" id="backgroundColor" value="#FFFFFF" class="w-full h-10 p-0 border border-gray-300 rounded-lg">
                                                </div>
                                            </div>
                                        </div>

                                        <!-- Logo设置 -->
                                        <div>
                                            <label class="block text-sm font-medium text-gray-700 mb-2">添加Logo</label>
                                            <input type="file" id="logoImage" accept="image/*" class="w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary transition-all text-sm">
                                            <div class="mt-2 flex items-center space-x-2">
                                                <input type="checkbox" id="useLogo" class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded">
                                                <label for="useLogo" class="text-sm text-gray-700">使用Logo</label>
                                            </div>
                                            <div id="logoSettings" class="mt-3 hidden">
                                                <label class="block text-xs text-gray-500 mb-1">Logo尺寸</label>
                                                <input type="range" id="logoSize" min="10" max="50" value="30" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-primary">
                                            </div>
                                        </div>

                                        <!-- 高级设置 -->
                                        <div>
                                            <button id="advancedSettingsToggle" class="w-full text-left text-sm font-medium text-primary flex items-center justify-between">
                                                <span>高级设置</span>
                                                <i class="fa fa-chevron-down transition-transform duration-300"></i>
                                            </button>
                                            <div id="advancedSettings" class="mt-3 space-y-3 hidden">
                                                <!-- 纠错级别 -->
                                                <div>
                                                    <label class="block text-xs text-gray-500 mb-1">纠错级别 (二维码)</label>
                                                    <select id="errorCorrectionLevel" class="w-full p-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-primary focus:border-primary">
                                                        <option value="L">低 (7%)</option>
                                                        <option value="M" selected>中 (15%)</option>
                                                        <option value="Q">较高 (25%)</option>
                                                        <option value="H">高 (30%)</option>
                                                    </select>
                                                </div>

                                                <!-- 边框设置 -->
                                                <div>
                                                    <label class="block text-xs text-gray-500 mb-1">边框大小</label>
                                                    <input type="range" id="borderSize" min="0" max="20" value="4" class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-primary">
                                                </div>

                                                <!-- 水印设置 -->
                                                <div>
                                                    <div class="flex items-center space-x-2">
                                                        <input type="checkbox" id="useWatermark" class="h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded">
                                                        <label for="useWatermark" class="text-sm text-gray-700">添加水印</label>
                                                    </div>
                                                    <div id="watermarkSettings" class="mt-2 hidden">
                                                        <input type="text" id="watermarkText" placeholder="输入水印文字" class="w-full p-2 border border-gray-300 rounded-lg text-sm focus:ring-2 focus:ring-primary focus:border-primary">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- 行动召唤 -->
        <section class="py-16 gradient-bg text-white">
            <div class="container mx-auto px-4 text-center">
                <h2 class="text-3xl md:text-4xl font-bold mb-6">开始创建您的专属二维码</h2>
                <p class="text-xl opacity-90 mb-8 max-w-2xl mx-auto">
                    无需注册，立即免费使用我们的二维码生成器，体验强大功能
                </p>
                <a href="#generator" class="inline-block px-8 py-3 bg-white text-primary font-semibold rounded-lg shadow-lg hover:shadow-xl transition-all transform hover:-translate-y-1">
                    免费生成 <i class="fa fa-arrow-right ml-2"></i>
                </a>
            </div>
        </section>
    </main>

    <!-- 页脚 -->
    <footer class="bg-dark text-white py-12">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                <div>
                    <div class="flex items-center space-x-2 mb-4">
                        <i class="fa fa-qrcode text-primary text-2xl"></i>
                        <h3 class="text-xl font-bold">全能码生成器</h3>
                    </div>
                    <p class="text-gray-400 mb-4">
                        专业的二维码与条形码生成工具
                   
                </div>

                <div>
                    <h4 class="text-lg font-semibold mb-4">功能</h4>
                    <ul class="space-y-2">
                        <li><a href="#" class="text-gray-400 hover:text-white transition-colors">二维码生成</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition-colors">条形码生成</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition-colors">批量生成</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition-colors">动态二维码</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white transition-colors">数据分析</a></li>
                    </ul>
                </div>

                
            </div>

            <div class="border-t border-gray-800 mt-10 pt-6 flex flex-col md:flex-row justify-between items-center">
                <p class="text-gray-500 text-sm">
                    &copy; 2025 Candy全能码生成器 版权所有
                </p>
                <div class="flex space-x-6 mt-4 md:mt-0">
                    <a href="#" class="text-gray-500 hover:text-gray-300 text-sm transition-colors">隐私政策</a>
                    <a href="#" class="text-gray-500 hover:text-gray-300 text-sm transition-colors">服务条款</a>
                    <a href="#" class="text-gray-500 hover:text-gray-300 text-sm transition-colors">法律声明</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- JavaScript -->
    <script>
        // 检查必要的库是否加载成功
        function checkLibraries() {
            const missingLibraries = [];
            if (typeof QRCode === 'undefined') missingLibraries.push('二维码生成库');
            if (typeof JsBarcode === 'undefined') missingLibraries.push('条形码生成库');

            if (missingLibraries.length > 0) {
                alert(`缺少必要的功能库: ${missingLibraries.join(', ')}\n请检查网络连接或稍后再试。`);
                return false;
            }
            return true;
        }

        // 等待DOM加载完成
        document.addEventListener('DOMContentLoaded', function () {
            // 检查库是否加载成功
            checkLibraries();

            // 导航栏滚动效果
            const navbar = document.getElementById('navbar');
            window.addEventListener('scroll', function () {
                if (window.scrollY > 50) {
                    navbar.classList.add('py-2', 'shadow-lg');
                    navbar.classList.remove('py-3', 'shadow-md');
                } else {
                    navbar.classList.add('py-3', 'shadow-md');
                    navbar.classList.remove('py-2', 'shadow-lg');
                }
            });

            // 移动端菜单切换
            const menuToggle = document.getElementById('menuToggle');
            const mobileMenu = document.getElementById('mobileMenu');

            menuToggle.addEventListener('click', function () {
                mobileMenu.classList.toggle('hidden');
            });

            // 平滑滚动
            document.querySelectorAll('a[href^="#"]').forEach(anchor => {
                anchor.addEventListener('click', function (e) {
                    e.preventDefault();

                    const targetId = this.getAttribute('href');
                    if (targetId === '#') return;

                    const targetElement = document.querySelector(targetId);
                    if (targetElement) {
                        window.scrollTo({
                            top: targetElement.offsetTop - 80,
                            behavior: 'smooth'
                        });

                        // 关闭移动菜单（如果打开）
                        if (!mobileMenu.classList.contains('hidden')) {
                            mobileMenu.classList.add('hidden');
                        }
                    }
                });
            });

            // 码类型切换
            const codeTypeBtns = document.querySelectorAll('.code-type-btn');
            codeTypeBtns.forEach(btn => {
                btn.addEventListener('click', function () {
                    // 移除所有按钮的active状态
                    codeTypeBtns.forEach(b => {
                        b.classList.remove('active', 'border-primary', 'bg-primary/5');
                        b.classList.add('border-gray-200');
                    });

                    // 添加当前按钮的active状态
                    this.classList.add('active', 'border-primary', 'bg-primary/5');
                    this.classList.remove('border-gray-200');

                    // 根据选择的类型更新生成按钮文本
                    const generateBtn = document.getElementById('generateBtn');
                    if (this.dataset.type === 'qr') {
                        generateBtn.innerHTML = '<i class="fa fa-magic mr-2"></i> 生成二维码';
                        document.getElementById('qrSubtypeContainer').classList.remove('hidden');
                    } else {
                        generateBtn.innerHTML = '<i class="fa fa-magic mr-2"></i> 生成条形码';
                        document.getElementById('qrSubtypeContainer').classList.add('hidden');
                        // 确保显示文本输入
                        showContentInput('text');
                    }

                    // 清除预览
                    clearPreview();
                });
            });

            // 二维码子类型切换
            const qrSubtypeBtns = document.querySelectorAll('.qr-subtype-btn');
            qrSubtypeBtns.forEach(btn => {
                btn.addEventListener('click', function () {
                    // 移除所有按钮的active状态
                    qrSubtypeBtns.forEach(b => {
                        b.classList.remove('active', 'bg-primary/5', 'text-primary');
                    });

                    // 添加当前按钮的active状态
                    this.classList.add('active', 'bg-primary/5', 'text-primary');

                    // 显示对应的内容输入框
                    showContentInput(this.dataset.subtype);

                    // 清除预览
                    clearPreview();
                });
            });

            // 显示对应的内容输入框
            function showContentInput(type) {
                const contentInputs = document.querySelectorAll('.content-input');
                contentInputs.forEach(input => {
                    input.classList.add('hidden');
                    input.classList.remove('active');
                });

                const targetInput = document.getElementById(`${type}Input`);
                if (targetInput) {
                    targetInput.classList.remove('hidden');
                    targetInput.classList.add('active');
                }
            }

            // 高级设置切换
            const advancedSettingsToggle = document.getElementById('advancedSettingsToggle');
            const advancedSettings = document.getElementById('advancedSettings');

            advancedSettingsToggle.addEventListener('click', function () {
                advancedSettings.classList.toggle('hidden');
                const icon = this.querySelector('i');
                icon.classList.toggle('rotate-180');
            });

            // Logo设置切换
            const useLogoCheckbox = document.getElementById('useLogo');
            const logoSettings = document.getElementById('logoSettings');

            useLogoCheckbox.addEventListener('change', function () {
                if (this.checked) {
                    logoSettings.classList.remove('hidden');
                } else {
                    logoSettings.classList.add('hidden');
                }
            });

            // 水印设置切换
            const useWatermarkCheckbox = document.getElementById('useWatermark');
            const watermarkSettings = document.getElementById('watermarkSettings');

            useWatermarkCheckbox.addEventListener('change', function () {
                if (this.checked) {
                    watermarkSettings.classList.remove('hidden');
                } else {
                    watermarkSettings.classList.add('hidden');
                }
            });

            // 图片预览
            const imageContentInput = document.getElementById('imageContent');
            const previewImage = document.getElementById('previewImage');

            imageContentInput.addEventListener('change', function (e) {
                if (e.target.files && e.target.files[0]) {
                    const reader = new FileReader();

                    reader.onload = function (e) {
                        previewImage.src = e.target.result;
                        previewImage.classList.remove('hidden');
                    }

                    reader.readAsDataURL(e.target.files[0]);
                }
            });

            // 音频预览
            const audioContentInput = document.getElementById('audioContent');

            audioContentInput.addEventListener('change', function (e) {
                if (e.target.files && e.target.files[0]) {
                    const audioPreview = document.getElementById('audioPreview');
                    const audioElement = audioPreview.querySelector('audio');

                    const reader = new FileReader();

                    reader.onload = function (e) {
                        audioElement.src = e.target.result;
                        audioPreview.classList.remove('hidden');
                    }

                    reader.readAsDataURL(e.target.files[0]);
                }
            });

            // 视频预览
            const videoContentInput = document.getElementById('videoContent');
            const videoPreview = document.getElementById('videoPreview');

            videoContentInput.addEventListener('change', function (e) {
                if (e.target.files && e.target.files[0]) {
                    const reader = new FileReader();

                    reader.onload = function (e) {
                        videoPreview.src = e.target.result;
                        videoPreview.classList.remove('hidden');
                    }

                    reader.readAsDataURL(e.target.files[0]);
                }
            });

            // 清除预览
            function clearPreview() {
                const canvas = document.getElementById('codeCanvas');
                const ctx = canvas.getContext('2d');
                ctx.clearRect(0, 0, canvas.width, canvas.height);

                document.getElementById('noPreviewMessage').classList.remove('hidden');
            }

            // 更新进度条
            function updateProgress(percent) {
                const progressBar = document.getElementById('progressBar');
                const progressPercent = document.getElementById('progressPercent');

                percent = Math.min(Math.max(percent, 0), 100);
                progressBar.style.width = `${percent}%`;
                progressPercent.textContent = `${percent}%`;
            }

            // 生成二维码/条形码
            document.getElementById('generateBtn').addEventListener('click', function () {
                // 再次检查库是否加载
                if (!checkLibraries()) return;

                const codeType = document.querySelector('.code-type-btn.active').dataset.type;
                let content = '';

                // 获取当前选中的二维码子类型
                const activeQrSubtype = document.querySelector('.qr-subtype-btn.active');
                const qrSubtype = activeQrSubtype ? activeQrSubtype.dataset.subtype : 'text';

                // 根据类型获取内容
                if (qrSubtype === 'text') {
                    content = document.getElementById('textContent').value.trim();
                } else if (qrSubtype === 'url') {
                    content = document.getElementById('urlContent').value.trim();
                } else if (qrSubtype === 'contact') {
                    // 构建vCard格式内容
                    const name = document.getElementById('contactName').value.trim();
                    const company = document.getElementById('contactCompany').value.trim();
                    const title = document.getElementById('contactTitle').value.trim();
                    const phone = document.getElementById('contactPhone').value.trim();
                    const email = document.getElementById('contactEmail').value.trim();
                    const address = document.getElementById('contactAddress').value.trim();

                    if (!name && !phone && !email) {
                        alert('请至少填写姓名、电话或邮箱中的一项');
                        return;
                    }

                    content = `BEGIN:VCARD\nVERSION:3.0\n`;
                    if (name) content += `FN:${name}\n`;
                    if (company || title) content += `ORG:${company};${title}\n`;
                    if (phone) content += `TEL:${phone}\n`;
                    if (email) content += `EMAIL:${email}\n`;
                    if (address) content += `ADR:;;${address}\n`;
                    content += `END:VCARD`;
                } else if (qrSubtype === 'file' || qrSubtype === 'image' || qrSubtype === 'audio' || qrSubtype === 'video') {
                    // 对于文件类型，这里简化处理，实际应用中需要上传文件并获取URL
                    const fileInput = document.getElementById(`${qrSubtype}Content`);
                    if (!fileInput.files || fileInput.files.length === 0) {
                        alert('请选择要上传的文件');
                        return;
                    }
                    // 实际应用中应该上传文件并获取URL，这里使用示例URL
                    content = `https://example.com/file/${qrSubtype}/${Date.now()}`;
                }

                // 验证内容
                if (!content) {
                    alert('请输入内容');
                    return;
                }

                // 显示进度条
                const progressContainer = document.getElementById('progressContainer');
                progressContainer.classList.remove('hidden');
                updateProgress(10);

                // 隐藏无预览消息
                document.getElementById('noPreviewMessage').classList.add('hidden');

                // 获取设置
                const size = parseInt(document.getElementById('codeSize').value);
                const foregroundColor = document.getElementById('foregroundColor').value;
                const backgroundColor = document.getElementById('backgroundColor').value;
                const borderSize = parseInt(document.getElementById('borderSize').value);

                // 设置画布尺寸
                const canvas = document.getElementById('codeCanvas');
                canvas.width = size;
                canvas.height = codeType === 'qr' ? size : size / 2;

                // 生成二维码
                if (codeType === 'qr') {
                    const errorCorrectionLevel = document.getElementById('errorCorrectionLevel').value;

                    // 更新进度
                    setTimeout(() => updateProgress(30), 100);

                    QRCode.toCanvas(canvas, content, {
                        width: size,
                        margin: borderSize,
                        color: {
                            dark: foregroundColor,
                            light: backgroundColor
                        },
                        errorCorrectionLevel: errorCorrectionLevel
                    }, function (error) {
                        if (error) {
                            console.error(error);
                            alert('生成二维码时出错: ' + error.message);
                            progressContainer.classList.add('hidden');
                            return;
                        }

                        // 更新进度
                        updateProgress(60);

                        // 添加Logo（如果启用）
                        const addLogo = document.getElementById('useLogo').checked;
                        if (addLogo) {
                            const logoInput = document.getElementById('logoImage');
                            if (logoInput.files && logoInput.files[0]) {
                                const reader = new FileReader();
                                reader.onload = function (e) {
                                    const logoImg = new Image();
                                    logoImg.onload = function () {
                                        const ctx = canvas.getContext('2d');
                                        const logoSize = (size * parseInt(document.getElementById('logoSize').value)) / 100;
                                        const x = (canvas.width - logoSize) / 2;
                                        const y = (canvas.height - logoSize) / 2;

                                        // 绘制白色背景
                                        ctx.fillStyle = backgroundColor;
                                        ctx.beginPath();
                                        ctx.arc(x + logoSize / 2, y + logoSize / 2, logoSize / 2, 0, Math.PI * 2);
                                        ctx.fill();

                                        // 绘制Logo
                                        ctx.beginPath();
                                        ctx.arc(x + logoSize / 2, y + logoSize / 2, logoSize / 2, 0, Math.PI * 2);
                                        ctx.closePath();
                                        ctx.clip();
                                        ctx.drawImage(logoImg, x, y, logoSize, logoSize);

                                        // 添加水印（如果启用）
                                        addWatermark(canvas, foregroundColor);

                                        // 完成进度
                                        updateProgress(100);
                                        setTimeout(() => progressContainer.classList.add('hidden'), 500);
                                    }
                                    logoImg.src = e.target.result;
                                }
                                reader.readAsDataURL(logoInput.files[0]);
                            } else {
                                // 没有选择Logo但勾选了使用Logo
                                alert('请选择要使用的Logo图片');
                                progressContainer.classList.add('hidden');
                            }
                        } else {
                            // 不添加Logo，直接处理水印
                            addWatermark(canvas, foregroundColor);

                            // 完成进度
                            updateProgress(100);
                            setTimeout(() => progressContainer.classList.add('hidden'), 500);
                        }
                    });
                }
                // 生成条形码
                else {
                    // 更新进度
                    setTimeout(() => updateProgress(30), 100);

                    try {
                        JsBarcode(canvas, content, {
                            width: 2,
                            height: size / 2 - 20,
                            displayValue: true,
                            lineColor: foregroundColor,
                            background: backgroundColor,
                            margin: borderSize,
                            fontSize: 16
                        });

                        // 更新进度
                        updateProgress(70);

                        // 添加水印（如果启用）
                        addWatermark(canvas, foregroundColor);

                        // 完成进度
                        updateProgress(100);
                        setTimeout(() => progressContainer.classList.add('hidden'), 500);
                    } catch (error) {
                        console.error(error);
                        alert('生成条形码时出错: ' + error.message);
                        progressContainer.classList.add('hidden');
                    }
                }
            });

            // 添加水印
            function addWatermark(canvas, foregroundColor) {
                if (document.getElementById('useWatermark').checked) {
                    const watermarkText = document.getElementById('watermarkText').value.trim();
                    if (watermarkText) {
                        const ctx = canvas.getContext('2d');
                        ctx.save();
                        ctx.fillStyle = `${foregroundColor}80`; // 添加透明度
                        ctx.font = '12px Arial';
                        ctx.textAlign = 'center';
                        ctx.textBaseline = 'bottom';
                        ctx.fillText(watermarkText, canvas.width / 2, canvas.height - 5);
                        ctx.restore();
                    }
                }
            }

            // 下载PNG
            document.getElementById('downloadPNGBtn').addEventListener('click', function () {
                const canvas = document.getElementById('codeCanvas');
                if (canvas.toDataURL().indexOf('data:,') !== -1) {
                    alert('请先生成二维码/条形码');
                    return;
                }

                const link = document.createElement('a');
                link.download = 'code.png';
                link.href = canvas.toDataURL('image/png');
                link.click();
            });

            // 下载SVG
            document.getElementById('downloadSVGBtn').addEventListener('click', function () {
                // 检查库是否加载
                if (!checkLibraries()) return;

                const canvas = document.getElementById('codeCanvas');
                if (canvas.toDataURL().indexOf('data:,') !== -1) {
                    alert('请先生成二维码/条形码');
                    return;
                }

                const codeType = document.querySelector('.code-type-btn.active').dataset.type;
                let content = '';
                const activeQrSubtype = document.querySelector('.qr-subtype-btn.active');
                const qrSubtype = activeQrSubtype ? activeQrSubtype.dataset.subtype : 'text';

                // 重新获取内容用于生成SVG
                if (qrSubtype === 'text') {
                    content = document.getElementById('textContent').value.trim();
                } else if (qrSubtype === 'url') {
                    content = document.getElementById('urlContent').value.trim();
                } else if (qrSubtype === 'contact') {
                    const name = document.getElementById('contactName').value.trim();
                    const company = document.getElementById('contactCompany').value.trim();
                    const title = document.getElementById('contactTitle').value.trim();
                    const phone = document.getElementById('contactPhone').value.trim();
                    const email = document.getElementById('contactEmail').value.trim();
                    const address = document.getElementById('contactAddress').value.trim();

                    content = `BEGIN:VCARD\nVERSION:3.0\n`;
                    if (name) content += `FN:${name}\n`;
                    if (company || title) content += `ORG:${company};${title}\n`;
                    if (phone) content += `TEL:${phone}\n`;
                    if (email) content += `EMAIL:${email}\n`;
                    if (address) content += `ADR:;;${address}\n`;
                    content += `END:VCARD`;
                } else if (qrSubtype === 'file' || qrSubtype === 'image' || qrSubtype === 'audio' || qrSubtype === 'video') {
                    content = `https://example.com/file/${qrSubtype}/${Date.now()}`;
                }

                if (!content) {
                    alert('请输入内容');
                    return;
                }

                const size = parseInt(document.getElementById('codeSize').value);
                const foregroundColor = document.getElementById('foregroundColor').value;
                const backgroundColor = document.getElementById('backgroundColor').value;
                const borderSize = parseInt(document.getElementById('borderSize').value);

                // 创建SVG元素
                const svg = document.createElementNS("http://www.w3.org/2000/svg", "svg");
                svg.setAttribute("width", size);
                svg.setAttribute("height", codeType === 'qr' ? size : size / 2);
                svg.setAttribute("xmlns", "http://www.w3.org/2000/svg");

                // 生成SVG内容
                if (codeType === 'qr') {
                    const errorCorrectionLevel = document.getElementById('errorCorrectionLevel').value;
                    QRCode.toString(content, {
                        type: 'svg',
                        width: size,
                        margin: borderSize,
                        color: {
                            dark: foregroundColor,
                            light: backgroundColor
                        },
                        errorCorrectionLevel: errorCorrectionLevel
                    }, function (err, svgString) {
                        if (err) {
                            alert('生成SVG时出错: ' + err.message);
                            return;
                        }
                        downloadSvg(svgString, 'code.svg');
                    });
                } else {
                    // 条形码SVG生成
                    const svgContainer = document.createElement('div');
                    JsBarcode(svgContainer, content, {
                        format: "CODE128",
                        width: 2,
                        height: size / 2 - 20,
                        displayValue: true,
                        lineColor: foregroundColor,
                        background: backgroundColor,
                        margin: borderSize,
                        fontSize: 16,
                        svg: true
                    });

                    const svgString = new XMLSerializer().serializeToString(svgContainer.firstElementChild);
                    downloadSvg(svgString, 'barcode.svg');
                }
            });

            // 下载SVG文件
            function downloadSvg(svgString, filename) {
                const blob = new Blob([svgString], { type: 'image/svg+xml' });
                const url = URL.createObjectURL(blob);

                const link = document.createElement('a');
                link.href = url;
                link.download = filename;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                URL.revokeObjectURL(url);
            }

            // 打印
            document.getElementById('printBtn').addEventListener('click', function () {
                const canvas = document.getElementById('codeCanvas');
                if (canvas.toDataURL().indexOf('data:,') !== -1) {
                    alert('请先生成二维码/条形码');
                    return;
                }

                // 创建打印窗口
                const printWindow = window.open('', '_blank');
                printWindow.document.write(`
                        <html>
                            <head>
                                <title>打印二维码/条形码</title>
                                <style>
                                    body { display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; }
                                    img { max-width: 100%; max-height: 80vh; }
                                </style>
                            </head>
                            <body>
                                <img src="${canvas.toDataURL('image/png')}" alt="二维码/条形码">
                            </body>
                        </html>

                    `);
                printWindow.document.close();
                printWindow.print();
            });
        });
    </script>
</body>
</html>